{"ast":null,"code":"import _slicedToArray from \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/frontend/src/components/App/AppLayout.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  margin: 0 auto;\\n  width: 100%;\\n  position: relative;\\n\\n  @media (min-width: \", \") {\\n    width: \", \";\\n  }\\n\\n  @media (min-width: \", \") {\\n    width: \", \";\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { Switch, Route } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Header from 'components/App/Header';\nimport NotFound from 'components/NotFound';\nimport SideBar from './SideBar';\nimport UserSuggestions from './UserSuggestions';\nimport Home from 'pages/Home';\nimport Profile from 'pages/Profile';\nimport Explore from 'pages/Explore';\nimport People from 'pages/People';\nimport Notifications from 'pages/Notifications';\nimport Post from 'pages/Post';\nimport Messages from 'pages/Messages';\nimport { useWindowSize } from 'hooks/useWindowSize';\nimport { useClickOutside } from 'hooks/useClickOutside';\nimport * as Routes from 'routes';\nimport theme from 'theme';\nimport { useStore } from 'store';\nimport { SET_AUTH_USER } from 'store/auth';\nvar Root = styled.div(_templateObject(), function (p) {\n  return p.theme.screen.md;\n}, function (p) {\n  return p.theme.screen.md;\n}, function (p) {\n  return parseInt(p.theme.screen.lg, 10) + 20 + 'px';\n}, function (p) {\n  return p.theme.screen.lg;\n});\n/**\n * Main layout of the app, when user is authenticated\n */\n\nvar AppLayout = function AppLayout(_ref) {\n  var location = _ref.location,\n      authUser = _ref.authUser;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 2),\n      auth = _useStore2[0].auth,\n      dispatch = _useStore2[1];\n\n  var windowSize = useWindowSize();\n  var isDesktop = windowSize.width >= parseInt(theme.screen.md, 10);\n\n  var _useState = useState(isDesktop),\n      _useState2 = _slicedToArray(_useState, 2),\n      isSideBarOpen = _useState2[0],\n      setIsSidebarOpen = _useState2[1];\n\n  var sideBarRef = useRef('');\n  useEffect(function () {\n    dispatch({\n      type: SET_AUTH_USER,\n      payload: authUser\n    });\n  }, [dispatch, authUser]);\n  useClickOutside(sideBarRef, function () {\n    if (!isDesktop && isSideBarOpen) {\n      setIsSidebarOpen(false);\n    }\n  });\n  useEffect(function () {\n    setIsSidebarOpen(isDesktop);\n  }, [isDesktop]);\n  useEffect(function () {\n    return function () {\n      if (!isDesktop) {\n        setIsSidebarOpen(false);\n      }\n    };\n  }, [location.pathname, isDesktop]);\n  if (!auth.user) return null;\n  return React.createElement(React.Fragment, null, React.createElement(Header, {\n    toggleSideBar: function toggleSideBar() {\n      return setIsSidebarOpen(!isSideBarOpen);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(Root, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(SideBar, {\n    isOpen: isSideBarOpen,\n    sideBarRef: sideBarRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: Routes.HOME,\n    component: Home,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.EXPLORE,\n    component: Explore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.PEOPLE,\n    component: People,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.NOTIFICATIONS,\n    component: Notifications,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.MESSAGES,\n    component: Messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.USER_PROFILE,\n    component: Profile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: Routes.POST,\n    component: Post,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(Route, {\n    component: NotFound,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  })), React.createElement(UserSuggestions, {\n    pathname: location.pathname,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })));\n};\n\nAppLayout.propTypes = {\n  location: PropTypes.object.isRequired,\n  authUser: PropTypes.object.isRequired\n};\nexport default withRouter(AppLayout);","map":{"version":3,"sources":["/Users/niruhan/MSc/source_code/new/lang-exchange-lk/frontend/src/components/App/AppLayout.js"],"names":["React","useEffect","useState","useRef","PropTypes","withRouter","Switch","Route","styled","Header","NotFound","SideBar","UserSuggestions","Home","Profile","Explore","People","Notifications","Post","Messages","useWindowSize","useClickOutside","Routes","theme","useStore","SET_AUTH_USER","Root","div","p","screen","md","parseInt","lg","AppLayout","location","authUser","auth","dispatch","windowSize","isDesktop","width","isSideBarOpen","setIsSidebarOpen","sideBarRef","type","payload","pathname","user","HOME","EXPLORE","PEOPLE","NOTIFICATIONS","MESSAGES","USER_PROFILE","POST","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { Switch, Route } from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport Header from 'components/App/Header';\nimport NotFound from 'components/NotFound';\nimport SideBar from './SideBar';\nimport UserSuggestions from './UserSuggestions';\n\nimport Home from 'pages/Home';\nimport Profile from 'pages/Profile';\nimport Explore from 'pages/Explore';\nimport People from 'pages/People';\nimport Notifications from 'pages/Notifications';\nimport Post from 'pages/Post';\nimport Messages from 'pages/Messages';\n\nimport { useWindowSize } from 'hooks/useWindowSize';\nimport { useClickOutside } from 'hooks/useClickOutside';\n\nimport * as Routes from 'routes';\n\nimport theme from 'theme';\n\nimport { useStore } from 'store';\nimport { SET_AUTH_USER } from 'store/auth';\n\nconst Root = styled.div`\n  display: flex;\n  flex-direction: row;\n  margin: 0 auto;\n  width: 100%;\n  position: relative;\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    width: ${p => p.theme.screen.md};\n  }\n\n  @media (min-width: ${p => parseInt(p.theme.screen.lg, 10) + 20 + 'px'}) {\n    width: ${p => p.theme.screen.lg};\n  }\n`;\n\n/**\n * Main layout of the app, when user is authenticated\n */\nconst AppLayout = ({ location, authUser }) => {\n  const [{ auth }, dispatch] = useStore();\n\n  const windowSize = useWindowSize();\n  const isDesktop = windowSize.width >= parseInt(theme.screen.md, 10);\n  const [isSideBarOpen, setIsSidebarOpen] = useState(isDesktop);\n\n  const sideBarRef = useRef('');\n\n  useEffect(() => {\n    dispatch({ type: SET_AUTH_USER, payload: authUser });\n  }, [dispatch, authUser]);\n\n  useClickOutside(sideBarRef, () => {\n    if (!isDesktop && isSideBarOpen) {\n      setIsSidebarOpen(false);\n    }\n  });\n\n  useEffect(() => {\n    setIsSidebarOpen(isDesktop);\n  }, [isDesktop]);\n\n  useEffect(() => {\n    return () => {\n      if (!isDesktop) {\n        setIsSidebarOpen(false);\n      }\n    };\n  }, [location.pathname, isDesktop]);\n\n  if (!auth.user) return null;\n\n  return (\n    <>\n      <Header toggleSideBar={() => setIsSidebarOpen(!isSideBarOpen)} />\n\n      <Root>\n        <SideBar isOpen={isSideBarOpen} sideBarRef={sideBarRef} />\n\n        <Switch>\n          <Route exact path={Routes.HOME} component={Home} />\n\n          <Route exact path={Routes.EXPLORE} component={Explore} />\n\n          <Route exact path={Routes.PEOPLE} component={People} />\n\n          <Route exact path={Routes.NOTIFICATIONS} component={Notifications} />\n\n          <Route exact path={Routes.MESSAGES} component={Messages} />\n\n          <Route exact path={Routes.USER_PROFILE} component={Profile} />\n\n          <Route exact path={Routes.POST} component={Post} />\n\n          <Route component={NotFound} />\n        </Switch>\n\n        <UserSuggestions pathname={location.pathname} />\n      </Root>\n    </>\n  );\n};\n\nAppLayout.propTypes = {\n  location: PropTypes.object.isRequired,\n  authUser: PropTypes.object.isRequired,\n};\n\nexport default withRouter(AppLayout);\n"]},"metadata":{},"sourceType":"module"}