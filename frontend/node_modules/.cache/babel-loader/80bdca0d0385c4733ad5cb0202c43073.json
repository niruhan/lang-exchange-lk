{"ast":null,"code":"import _slicedToArray from \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/niruhan/MSc/source_code/new/lang-exchange-lk/frontend/src/components/App/Header/Header.js\";\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \";\\n  right: 100px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n  \", \";\\n  right: 54px;\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  top: -6px;\\n  position: absolute;\\n  height: 22px;\\n  width: 22px;\\n  padding: 2px;\\n  letter-spacing: -1px;\\n  border-radius: 50%;\\n  color: \", \";\\n  background-color: \", \";\\n  font-size: \", \";\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  position: relative;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  display: none;\\n  color: \", \";\\n  font-weight: \", \";\\n  font-size: \", \";\\n\\n  &:hover {\\n    color: \", \";\\n  }\\n\\n  @media (min-width: \", \") {\\n    display: block;\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\\n  @media (min-width: \", \") {\\n    display: none;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: space-between;\\n  height: \", \"px;\\n  margin: 0 auto;\\n  width: 100%;\\n\\n  @media (min-width: \", \") {\\n    width: \", \";\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: sticky;\\n  top: 0;\\n  background-color: \", \";\\n  z-index: \", \";\\n  height: \", \"px;\\n  border-bottom: 1px solid \", \";\\n\\n  @media (min-width: \", \") {\\n    z-index: \", \";\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { NotificationIcon, MenuIcon, EnvelopeOpenIcon } from 'components/icons';\nimport { Container, Spacing } from 'components/Layout';\nimport { A } from 'components/Text';\nimport { Button } from 'components/Form';\nimport Avatar from 'components/Avatar';\nimport Search from 'components/Search';\nimport HeaderDropDowns from './HeaderDropDowns';\nimport { useClickOutside } from 'hooks/useClickOutside';\nimport { useStore } from 'store';\nimport { HEADER_HEIGHT } from 'constants/Layout';\nimport SiteInfo from 'constants/SiteInfo.json';\nimport * as Routes from 'routes';\nvar Root = styled(Container)(_templateObject(), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.zIndex.md;\n}, HEADER_HEIGHT, function (p) {\n  return p.theme.colors.border.main;\n}, function (p) {\n  return p.theme.screen.md;\n}, function (p) {\n  return p.theme.zIndex.md;\n});\nvar Wrapper = styled.div(_templateObject2(), HEADER_HEIGHT, function (p) {\n  return parseInt(p.theme.screen.lg, 10) + 20 + 'px';\n}, function (p) {\n  return p.theme.screen.lg;\n});\nvar LeftSide = styled.div(_templateObject3());\nvar Hamburger = styled.div(_templateObject4(), function (p) {\n  return p.theme.screen.md;\n});\nvar Logo = styled(A)(_templateObject5(), function (p) {\n  return p.theme.colors.primary.main;\n}, function (p) {\n  return p.theme.font.weight.bold;\n}, function (p) {\n  return p.theme.font.size.sm;\n}, function (p) {\n  return p.theme.colors.primary.main;\n}, function (p) {\n  return p.theme.screen.md;\n});\nvar RightSide = styled.div(_templateObject6());\nvar countCSS = css(_templateObject7(), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.colors.error.main;\n}, function (p) {\n  return p.theme.font.size.xxs;\n});\nvar NotificationCount = styled.span(_templateObject8(), countCSS);\nvar MessageCount = styled.span(_templateObject9(), countCSS);\n/**\n * Header of the App when user is authenticated\n */\n\nvar Header = function Header(_ref) {\n  var location = _ref.location,\n      toggleSideBar = _ref.toggleSideBar;\n\n  var _useStore = useStore(),\n      _useStore2 = _slicedToArray(_useStore, 1),\n      auth = _useStore2[0].auth;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      dropdownOpen = _useState2[0],\n      setDropdownOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dropdownData = _useState4[0],\n      setDropdownData = _useState4[1];\n\n  var messageRef = useRef(null);\n  var notificationRef = useRef(null);\n  var userRef = useRef(null);\n\n  var closeOnClickOutside = function closeOnClickOutside() {\n    if (dropdownOpen) {\n      closeDropDown();\n    }\n  };\n\n  useClickOutside(messageRef, closeOnClickOutside);\n  useClickOutside(notificationRef, closeOnClickOutside);\n  useClickOutside(userRef, closeOnClickOutside);\n\n  var closeDropDown = function closeDropDown() {\n    setDropdownOpen(null);\n    setDropdownData([]);\n  };\n\n  useEffect(function () {\n    return function () {\n      return closeDropDown();\n    };\n  }, [location.pathname]);\n\n  var handleIconClick = function handleIconClick(dropdownType) {\n    if (dropdownOpen) {\n      closeDropDown();\n    } else {\n      if (dropdownType === 'NOTIFICATION') {\n        setDropdownData(auth.user.newNotifications);\n      } else if (dropdownType === 'MESSAGE') {\n        setDropdownData(auth.user.newConversations);\n      }\n\n      setDropdownOpen(dropdownType);\n    }\n  };\n\n  return React.createElement(Root, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(LeftSide, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(Hamburger, {\n    onClick: toggleSideBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(MenuIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  })), React.createElement(Logo, {\n    to: Routes.HOME,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, SiteInfo.name), React.createElement(Spacing, {\n    left: \"sm\",\n    right: \"md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Search, {\n    location: location,\n    placeholder: \"Search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }))), React.createElement(RightSide, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(Spacing, {\n    right: \"md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(Button, {\n    ghost: true,\n    onClick: function onClick() {\n      return handleIconClick('MESSAGE');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, auth.user.newConversations.length > 0 && React.createElement(MessageCount, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, auth.user.newConversations.length), React.createElement(EnvelopeOpenIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }))), React.createElement(Spacing, {\n    right: \"md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(Button, {\n    ghost: true,\n    onClick: function onClick() {\n      return handleIconClick('NOTIFICATION');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, auth.user.newNotifications.length > 0 && React.createElement(NotificationCount, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, auth.user.newNotifications.length), React.createElement(NotificationIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }))), React.createElement(Button, {\n    ghost: true,\n    onClick: function onClick() {\n      return handleIconClick('USER');\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    image: auth.user.image,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }))), React.createElement(HeaderDropDowns, {\n    messageRef: messageRef,\n    notificationRef: notificationRef,\n    userRef: userRef,\n    dropdownOpen: dropdownOpen,\n    dropdownData: dropdownData,\n    closeDropDown: closeDropDown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  })));\n};\n\nHeader.propTypes = {\n  location: PropTypes.object.isRequired,\n  toggleSideBar: PropTypes.func.isRequired\n};\nexport default withRouter(Header);","map":{"version":3,"sources":["/Users/niruhan/MSc/source_code/new/lang-exchange-lk/frontend/src/components/App/Header/Header.js"],"names":["React","useState","useEffect","useRef","PropTypes","styled","css","withRouter","NotificationIcon","MenuIcon","EnvelopeOpenIcon","Container","Spacing","A","Button","Avatar","Search","HeaderDropDowns","useClickOutside","useStore","HEADER_HEIGHT","SiteInfo","Routes","Root","p","theme","colors","white","zIndex","md","border","main","screen","Wrapper","div","parseInt","lg","LeftSide","Hamburger","Logo","primary","font","weight","bold","size","sm","RightSide","countCSS","error","xxs","NotificationCount","span","MessageCount","Header","location","toggleSideBar","auth","dropdownOpen","setDropdownOpen","dropdownData","setDropdownData","messageRef","notificationRef","userRef","closeOnClickOutside","closeDropDown","pathname","handleIconClick","dropdownType","user","newNotifications","newConversations","HOME","name","length","image","propTypes","object","isRequired","func"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,IAAiBC,GAAjB,QAA4B,mBAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SAASC,gBAAT,EAA2BC,QAA3B,EAAqCC,gBAArC,QAA6D,kBAA7D;AACA,SAASC,SAAT,EAAoBC,OAApB,QAAmC,mBAAnC;AACA,SAASC,CAAT,QAAkB,iBAAlB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AAEA,SAASC,eAAT,QAAgC,uBAAhC;AAEA,SAASC,QAAT,QAAyB,OAAzB;AAEA,SAASC,aAAT,QAA8B,kBAA9B;AACA,OAAOC,QAAP,MAAqB,yBAArB;AAEA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AAEA,IAAMC,IAAI,GAAGlB,MAAM,CAACM,SAAD,CAAT,oBAGY,UAAAa,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAeC,KAAnB;AAAA,CAHb,EAIG,UAAAH,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQG,MAAR,CAAeC,EAAnB;AAAA,CAJJ,EAKET,aALF,EAMmB,UAAAI,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAeI,MAAf,CAAsBC,IAA1B;AAAA,CANpB,EAQa,UAAAP,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQO,MAAR,CAAeH,EAAnB;AAAA,CARd,EASK,UAAAL,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQG,MAAR,CAAeC,EAAnB;AAAA,CATN,CAAV;AAaA,IAAMI,OAAO,GAAG5B,MAAM,CAAC6B,GAAV,qBAMDd,aANC,EAUU,UAAAI,CAAC;AAAA,SAAIW,QAAQ,CAACX,CAAC,CAACC,KAAF,CAAQO,MAAR,CAAeI,EAAhB,EAAoB,EAApB,CAAR,GAAkC,EAAlC,GAAuC,IAA3C;AAAA,CAVX,EAWA,UAAAZ,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQO,MAAR,CAAeI,EAAnB;AAAA,CAXD,CAAb;AAeA,IAAMC,QAAQ,GAAGhC,MAAM,CAAC6B,GAAV,oBAAd;AAMA,IAAMI,SAAS,GAAGjC,MAAM,CAAC6B,GAAV,qBAGQ,UAAAV,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQO,MAAR,CAAeH,EAAnB;AAAA,CAHT,CAAf;AAQA,IAAMU,IAAI,GAAGlC,MAAM,CAACQ,CAAD,CAAT,qBAEC,UAAAW,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAec,OAAf,CAAuBT,IAA3B;AAAA,CAFF,EAGO,UAAAP,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQgB,IAAR,CAAaC,MAAb,CAAoBC,IAAxB;AAAA,CAHR,EAIK,UAAAnB,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQgB,IAAR,CAAaG,IAAb,CAAkBC,EAAtB;AAAA,CAJN,EAOG,UAAArB,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAec,OAAf,CAAuBT,IAA3B;AAAA,CAPJ,EAUa,UAAAP,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQO,MAAR,CAAeH,EAAnB;AAAA,CAVd,CAAV;AAeA,IAAMiB,SAAS,GAAGzC,MAAM,CAAC6B,GAAV,oBAAf;AAOA,IAAMa,QAAQ,GAAGzC,GAAH,qBAQH,UAAAkB,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAeC,KAAnB;AAAA,CARE,EASQ,UAAAH,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQC,MAAR,CAAesB,KAAf,CAAqBjB,IAAzB;AAAA,CATT,EAUC,UAAAP,CAAC;AAAA,SAAIA,CAAC,CAACC,KAAF,CAAQgB,IAAR,CAAaG,IAAb,CAAkBK,GAAtB;AAAA,CAVF,CAAd;AAiBA,IAAMC,iBAAiB,GAAG7C,MAAM,CAAC8C,IAAV,qBACnBJ,QADmB,CAAvB;AAKA,IAAMK,YAAY,GAAG/C,MAAM,CAAC8C,IAAV,qBACdJ,QADc,CAAlB;AAKA;;;;AAGA,IAAMM,MAAM,GAAG,SAATA,MAAS,OAAiC;AAAA,MAA9BC,QAA8B,QAA9BA,QAA8B;AAAA,MAApBC,aAAoB,QAApBA,aAAoB;;AAAA,kBAC3BpC,QAAQ,EADmB;AAAA;AAAA,MACrCqC,IADqC,iBACrCA,IADqC;;AAAA,kBAGNvD,QAAQ,CAAC,IAAD,CAHF;AAAA;AAAA,MAGvCwD,YAHuC;AAAA,MAGzBC,eAHyB;;AAAA,mBAINzD,QAAQ,CAAC,EAAD,CAJF;AAAA;AAAA,MAIvC0D,YAJuC;AAAA,MAIzBC,eAJyB;;AAM9C,MAAMC,UAAU,GAAG1D,MAAM,CAAC,IAAD,CAAzB;AACA,MAAM2D,eAAe,GAAG3D,MAAM,CAAC,IAAD,CAA9B;AACA,MAAM4D,OAAO,GAAG5D,MAAM,CAAC,IAAD,CAAtB;;AAEA,MAAM6D,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAChC,QAAIP,YAAJ,EAAkB;AAChBQ,MAAAA,aAAa;AACd;AACF,GAJD;;AAMA/C,EAAAA,eAAe,CAAC2C,UAAD,EAAaG,mBAAb,CAAf;AACA9C,EAAAA,eAAe,CAAC4C,eAAD,EAAkBE,mBAAlB,CAAf;AACA9C,EAAAA,eAAe,CAAC6C,OAAD,EAAUC,mBAAV,CAAf;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1BP,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,IAAAA,eAAe,CAAC,EAAD,CAAf;AACD,GAHD;;AAKA1D,EAAAA,SAAS,CAAC,YAAM;AACd,WAAO;AAAA,aAAM+D,aAAa,EAAnB;AAAA,KAAP;AACD,GAFQ,EAEN,CAACX,QAAQ,CAACY,QAAV,CAFM,CAAT;;AAIA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,YAAY,EAAI;AACtC,QAAIX,YAAJ,EAAkB;AAChBQ,MAAAA,aAAa;AACd,KAFD,MAEO;AACL,UAAIG,YAAY,KAAK,cAArB,EAAqC;AACnCR,QAAAA,eAAe,CAACJ,IAAI,CAACa,IAAL,CAAUC,gBAAX,CAAf;AACD,OAFD,MAEO,IAAIF,YAAY,KAAK,SAArB,EAAgC;AACrCR,QAAAA,eAAe,CAACJ,IAAI,CAACa,IAAL,CAAUE,gBAAX,CAAf;AACD;;AAEDb,MAAAA,eAAe,CAACU,YAAD,CAAf;AACD;AACF,GAZD;;AAcA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAEb,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAKE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAEjC,MAAM,CAACkD,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBnD,QAAQ,CAACoD,IAAjC,CALF,EAOE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,IAAd;AAAmB,IAAA,KAAK,EAAC,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEnB,QAAlB;AAA4B,IAAA,WAAW,EAAC,QAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAPF,CADF,EAaE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,OAAO,EAAE;AAAA,aAAMa,eAAe,CAAC,SAAD,CAArB;AAAA,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGX,IAAI,CAACa,IAAL,CAAUE,gBAAV,CAA2BG,MAA3B,GAAoC,CAApC,IACC,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAelB,IAAI,CAACa,IAAL,CAAUE,gBAAV,CAA2BG,MAA1C,CAFJ,EAKE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF,CADF,EAWE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,OAAO,EAAE;AAAA,aAAMP,eAAe,CAAC,cAAD,CAArB;AAAA,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGX,IAAI,CAACa,IAAL,CAAUC,gBAAV,CAA2BI,MAA3B,GAAoC,CAApC,IACC,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlB,IAAI,CAACa,IAAL,CAAUC,gBAAV,CAA2BI,MAD9B,CAFJ,EAME,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF,CAXF,EAsBE,oBAAC,MAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,OAAO,EAAE;AAAA,aAAMP,eAAe,CAAC,MAAD,CAArB;AAAA,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAEX,IAAI,CAACa,IAAL,CAAUM,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAtBF,CAbF,EAwCE,oBAAC,eAAD;AACE,IAAA,UAAU,EAAEd,UADd;AAEE,IAAA,eAAe,EAAEC,eAFnB;AAGE,IAAA,OAAO,EAAEC,OAHX;AAIE,IAAA,YAAY,EAAEN,YAJhB;AAKE,IAAA,YAAY,EAAEE,YALhB;AAME,IAAA,aAAa,EAAEM,aANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxCF,CADF,CADF;AAqDD,CAhGD;;AAkGAZ,MAAM,CAACuB,SAAP,GAAmB;AACjBtB,EAAAA,QAAQ,EAAElD,SAAS,CAACyE,MAAV,CAAiBC,UADV;AAEjBvB,EAAAA,aAAa,EAAEnD,SAAS,CAAC2E,IAAV,CAAeD;AAFb,CAAnB;AAKA,eAAevE,UAAU,CAAC8C,MAAD,CAAzB","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { withRouter } from 'react-router-dom';\n\nimport { NotificationIcon, MenuIcon, EnvelopeOpenIcon } from 'components/icons';\nimport { Container, Spacing } from 'components/Layout';\nimport { A } from 'components/Text';\nimport { Button } from 'components/Form';\nimport Avatar from 'components/Avatar';\nimport Search from 'components/Search';\nimport HeaderDropDowns from './HeaderDropDowns';\n\nimport { useClickOutside } from 'hooks/useClickOutside';\n\nimport { useStore } from 'store';\n\nimport { HEADER_HEIGHT } from 'constants/Layout';\nimport SiteInfo from 'constants/SiteInfo.json';\n\nimport * as Routes from 'routes';\n\nconst Root = styled(Container)`\n  position: sticky;\n  top: 0;\n  background-color: ${p => p.theme.colors.white};\n  z-index: ${p => p.theme.zIndex.md};\n  height: ${HEADER_HEIGHT}px;\n  border-bottom: 1px solid ${p => p.theme.colors.border.main};\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    z-index: ${p => p.theme.zIndex.md};\n  }\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  height: ${HEADER_HEIGHT}px;\n  margin: 0 auto;\n  width: 100%;\n\n  @media (min-width: ${p => parseInt(p.theme.screen.lg, 10) + 20 + 'px'}) {\n    width: ${p => p.theme.screen.lg};\n  }\n`;\n\nconst LeftSide = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`;\n\nconst Hamburger = styled.div`\n  cursor: pointer;\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    display: none;\n  }\n`;\n\nconst Logo = styled(A)`\n  display: none;\n  color: ${p => p.theme.colors.primary.main};\n  font-weight: ${p => p.theme.font.weight.bold};\n  font-size: ${p => p.theme.font.size.sm};\n\n  &:hover {\n    color: ${p => p.theme.colors.primary.main};\n  }\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    display: block;\n  }\n`;\n\nconst RightSide = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  position: relative;\n`;\n\nconst countCSS = css`\n  top: -6px;\n  position: absolute;\n  height: 22px;\n  width: 22px;\n  padding: 2px;\n  letter-spacing: -1px;\n  border-radius: 50%;\n  color: ${p => p.theme.colors.white};\n  background-color: ${p => p.theme.colors.error.main};\n  font-size: ${p => p.theme.font.size.xxs};\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst NotificationCount = styled.span`\n  ${countCSS};\n  right: 54px;\n`;\n\nconst MessageCount = styled.span`\n  ${countCSS};\n  right: 100px;\n`;\n\n/**\n * Header of the App when user is authenticated\n */\nconst Header = ({ location, toggleSideBar }) => {\n  const [{ auth }] = useStore();\n\n  const [dropdownOpen, setDropdownOpen] = useState(null);\n  const [dropdownData, setDropdownData] = useState([]);\n\n  const messageRef = useRef(null);\n  const notificationRef = useRef(null);\n  const userRef = useRef(null);\n\n  const closeOnClickOutside = () => {\n    if (dropdownOpen) {\n      closeDropDown();\n    }\n  };\n\n  useClickOutside(messageRef, closeOnClickOutside);\n  useClickOutside(notificationRef, closeOnClickOutside);\n  useClickOutside(userRef, closeOnClickOutside);\n\n  const closeDropDown = () => {\n    setDropdownOpen(null);\n    setDropdownData([]);\n  };\n\n  useEffect(() => {\n    return () => closeDropDown();\n  }, [location.pathname]);\n\n  const handleIconClick = dropdownType => {\n    if (dropdownOpen) {\n      closeDropDown();\n    } else {\n      if (dropdownType === 'NOTIFICATION') {\n        setDropdownData(auth.user.newNotifications);\n      } else if (dropdownType === 'MESSAGE') {\n        setDropdownData(auth.user.newConversations);\n      }\n\n      setDropdownOpen(dropdownType);\n    }\n  };\n\n  return (\n    <Root>\n      <Wrapper>\n        <LeftSide>\n          <Hamburger onClick={toggleSideBar}>\n            <MenuIcon />\n          </Hamburger>\n\n          <Logo to={Routes.HOME}>{SiteInfo.name}</Logo>\n\n          <Spacing left=\"sm\" right=\"md\">\n            <Search location={location} placeholder=\"Search\" />\n          </Spacing>\n        </LeftSide>\n\n        <RightSide>\n          <Spacing right=\"md\">\n            <Button ghost onClick={() => handleIconClick('MESSAGE')}>\n              {auth.user.newConversations.length > 0 && (\n                <MessageCount>{auth.user.newConversations.length}</MessageCount>\n              )}\n\n              <EnvelopeOpenIcon />\n            </Button>\n          </Spacing>\n\n          <Spacing right=\"md\">\n            <Button ghost onClick={() => handleIconClick('NOTIFICATION')}>\n              {auth.user.newNotifications.length > 0 && (\n                <NotificationCount>\n                  {auth.user.newNotifications.length}\n                </NotificationCount>\n              )}\n              <NotificationIcon />\n            </Button>\n          </Spacing>\n\n          <Button ghost onClick={() => handleIconClick('USER')}>\n            <Avatar image={auth.user.image} />\n          </Button>\n        </RightSide>\n\n        <HeaderDropDowns\n          messageRef={messageRef}\n          notificationRef={notificationRef}\n          userRef={userRef}\n          dropdownOpen={dropdownOpen}\n          dropdownData={dropdownData}\n          closeDropDown={closeDropDown}\n        />\n      </Wrapper>\n    </Root>\n  );\n};\n\nHeader.propTypes = {\n  location: PropTypes.object.isRequired,\n  toggleSideBar: PropTypes.func.isRequired,\n};\n\nexport default withRouter(Header);\n"]},"metadata":{},"sourceType":"module"}