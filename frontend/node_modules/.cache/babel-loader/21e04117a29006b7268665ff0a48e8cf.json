{"ast":null,"code":"import _regeneratorRuntime from \"/Users/niruhan/MSc/source_code/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/niruhan/MSc/source_code/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/niruhan/MSc/source_code/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/niruhan/MSc/source_code/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/niruhan/MSc/source_code/lang-exchange-lk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/niruhan/MSc/source_code/lang-exchange-lk/frontend/src/pages/Auth/SignUp.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: \", \";\\n  border-radius: \", \";\\n  background-color: rgba(255, 255, 255, 0.8);\\n  width: 100%;\\n\\n  @media (min-width: \", \") {\\n    width: 450px;\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  margin-bottom: \", \";\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: none;\\n  flex-direction: column;\\n  color: \", \";\\n  max-width: \", \";\\n\\n  @media (min-width: \", \") {\\n    display: flex;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  margin-top: 60px;\\n\\n  @media (min-width: \", \") {\\n    justify-content: space-between;\\n    margin-top: 120px;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { Mutation } from 'react-apollo';\nimport { Spacing, Container } from 'components/Layout';\nimport { H1, Error } from 'components/Text';\nimport { InputText, Button } from 'components/Form';\nimport Head from 'components/Head';\nimport { SIGN_UP } from 'graphql/user';\nimport * as Routes from 'routes';\nvar Root = styled(Container)(_templateObject(), function (p) {\n  return p.theme.screen.md;\n});\nvar Welcome = styled.div(_templateObject2(), function (p) {\n  return p.theme.colors.white;\n}, function (p) {\n  return p.theme.screen.xs;\n}, function (p) {\n  return p.theme.screen.md;\n});\nvar Heading = styled(H1)(_templateObject3(), function (p) {\n  return p.theme.spacing.sm;\n});\nvar Form = styled.div(_templateObject4(), function (p) {\n  return p.theme.spacing.md;\n}, function (p) {\n  return p.theme.radius.sm;\n}, function (p) {\n  return p.theme.screen.sm;\n});\n/**\n * Sign Up page\n */\n\nvar SignUp = function SignUp(_ref) {\n  var history = _ref.history,\n      refetch = _ref.refetch;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState({\n    fullName: '',\n    username: '',\n    email: '',\n    password: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      values = _useState4[0],\n      setValues = _useState4[1];\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setValues(_objectSpread({}, values, _defineProperty({}, name, value)));\n  };\n\n  var validate = function validate() {\n    if (!fullName || !email || !username || !password) {\n      return 'All fields are required';\n    }\n\n    if (fullName.length > 50) {\n      return 'Full name no more than 50 characters';\n    }\n\n    var emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    if (!emailRegex.test(String(email).toLowerCase())) {\n      return 'Enter a valid email address.';\n    }\n\n    var usernameRegex = /^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/;\n\n    if (!usernameRegex.test(username)) {\n      return 'Usernames can only use letters, numbers, underscores and periods';\n    } else if (username.length > 20) {\n      return 'Username no more than 50 characters';\n    }\n\n    if (password.length < 6) {\n      return 'Password min 6 characters';\n    }\n\n    return false;\n  };\n\n  var handleSubmit = function handleSubmit(e, signup) {\n    e.preventDefault();\n    var error = validate();\n\n    if (error) {\n      setError(error);\n      return false;\n    }\n\n    signup().then(\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref2) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = _ref2.data;\n                localStorage.setItem('token', data.signup.token);\n                _context.next = 4;\n                return refetch();\n\n              case 4:\n                history.push(Routes.HOME);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  };\n\n  var renderErrors = function renderErrors(apiError) {\n    var errorMessage;\n\n    if (error) {\n      errorMessage = error;\n    } else if (apiError) {\n      errorMessage = apiError.graphQLErrors[0].message;\n    }\n\n    if (errorMessage) {\n      return React.createElement(Spacing, {\n        bottom: \"sm\",\n        top: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Error, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, errorMessage));\n    }\n\n    return null;\n  };\n\n  var fullName = values.fullName,\n      email = values.email,\n      password = values.password,\n      username = values.username;\n  return React.createElement(Mutation, {\n    mutation: SIGN_UP,\n    variables: {\n      input: {\n        fullName: fullName,\n        email: email,\n        password: password,\n        username: username\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, function (signup, _ref4) {\n    var loading = _ref4.loading,\n        apiError = _ref4.error;\n    return React.createElement(Root, {\n      maxWidth: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Head, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(Welcome, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Heading, {\n      color: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Connect with friends and the world around you.\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"See photos and updates from your friends.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Follow your interests.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Hear what people are talking about.\")), React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Spacing, {\n      bottom: \"md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(H1, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Create Account\")), React.createElement(\"form\", {\n      onSubmit: function onSubmit(e) {\n        return handleSubmit(e, signup);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(InputText, {\n      type: \"text\",\n      name: \"fullName\",\n      values: fullName,\n      onChange: handleChange,\n      placeholder: \"Full name\",\n      borderColor: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(Spacing, {\n      top: \"xs\",\n      bottom: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(InputText, {\n      type: \"text\",\n      name: \"email\",\n      values: email,\n      onChange: handleChange,\n      placeholder: \"Email\",\n      borderColor: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(InputText, {\n      type: \"text\",\n      name: \"username\",\n      values: username,\n      onChange: handleChange,\n      placeholder: \"Username\",\n      borderColor: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(Spacing, {\n      top: \"xs\",\n      bottom: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(InputText, {\n      type: \"password\",\n      name: \"password\",\n      values: password,\n      onChange: handleChange,\n      placeholder: \"Password\",\n      borderColor: \"white\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })), renderErrors(apiError), React.createElement(Spacing, {\n      top: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Button, {\n      size: \"large\",\n      disabled: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Sign up\"))));\n  });\n};\n\nSignUp.propTypes = {\n  history: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired\n};\nexport default withRouter(SignUp);","map":{"version":3,"sources":["/Users/niruhan/MSc/source_code/lang-exchange-lk/frontend/src/pages/Auth/SignUp.js"],"names":["React","useState","PropTypes","styled","withRouter","Mutation","Spacing","Container","H1","Error","InputText","Button","Head","SIGN_UP","Routes","Root","p","theme","screen","md","Welcome","div","colors","white","xs","Heading","spacing","sm","Form","radius","SignUp","history","refetch","error","setError","fullName","username","email","password","values","setValues","handleChange","e","target","name","value","validate","length","emailRegex","test","String","toLowerCase","usernameRegex","handleSubmit","signup","preventDefault","then","data","localStorage","setItem","token","push","HOME","renderErrors","apiError","errorMessage","graphQLErrors","message","input","loading","propTypes","object","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { withRouter } from 'react-router-dom';\nimport { Mutation } from 'react-apollo';\n\nimport { Spacing, Container } from 'components/Layout';\nimport { H1, Error } from 'components/Text';\nimport { InputText, Button } from 'components/Form';\nimport Head from 'components/Head';\n\nimport { SIGN_UP } from 'graphql/user';\n\nimport * as Routes from 'routes';\n\nconst Root = styled(Container)`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 60px;\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    justify-content: space-between;\n    margin-top: 120px;\n  }\n`;\n\nconst Welcome = styled.div`\n  display: none;\n  flex-direction: column;\n  color: ${p => p.theme.colors.white};\n  max-width: ${p => p.theme.screen.xs};\n\n  @media (min-width: ${p => p.theme.screen.md}) {\n    display: flex;\n  }\n`;\n\nconst Heading = styled(H1)`\n  margin-bottom: ${p => p.theme.spacing.sm};\n`;\n\nconst Form = styled.div`\n  padding: ${p => p.theme.spacing.md};\n  border-radius: ${p => p.theme.radius.sm};\n  background-color: rgba(255, 255, 255, 0.8);\n  width: 100%;\n\n  @media (min-width: ${p => p.theme.screen.sm}) {\n    width: 450px;\n  }\n`;\n\n/**\n * Sign Up page\n */\nconst SignUp = ({ history, refetch }) => {\n  const [error, setError] = useState('');\n  const [values, setValues] = useState({\n    fullName: '',\n    username: '',\n    email: '',\n    password: '',\n  });\n\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setValues({ ...values, [name]: value });\n  };\n\n  const validate = () => {\n    if (!fullName || !email || !username || !password) {\n      return 'All fields are required';\n    }\n\n    if (fullName.length > 50) {\n      return 'Full name no more than 50 characters';\n    }\n\n    const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    if (!emailRegex.test(String(email).toLowerCase())) {\n      return 'Enter a valid email address.';\n    }\n\n    const usernameRegex = /^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/;\n    if (!usernameRegex.test(username)) {\n      return 'Usernames can only use letters, numbers, underscores and periods';\n    } else if (username.length > 20) {\n      return 'Username no more than 50 characters';\n    }\n\n    if (password.length < 6) {\n      return 'Password min 6 characters';\n    }\n\n    return false;\n  };\n\n  const handleSubmit = (e, signup) => {\n    e.preventDefault();\n\n    const error = validate();\n    if (error) {\n      setError(error);\n      return false;\n    }\n\n    signup().then(async ({ data }) => {\n      localStorage.setItem('token', data.signup.token);\n      await refetch();\n      history.push(Routes.HOME);\n    });\n  };\n\n  const renderErrors = apiError => {\n    let errorMessage;\n\n    if (error) {\n      errorMessage = error;\n    } else if (apiError) {\n      errorMessage = apiError.graphQLErrors[0].message;\n    }\n\n    if (errorMessage) {\n      return (\n        <Spacing bottom=\"sm\" top=\"sm\">\n          <Error>{errorMessage}</Error>\n        </Spacing>\n      );\n    }\n\n    return null;\n  };\n\n  const { fullName, email, password, username } = values;\n\n  return (\n    <Mutation\n      mutation={SIGN_UP}\n      variables={{ input: { fullName, email, password, username } }}\n    >\n      {(signup, { loading, error: apiError }) => {\n        return (\n          <Root maxWidth=\"lg\">\n            <Head />\n\n            <Welcome>\n              <div>\n                <Heading color=\"white\">\n                  Connect with friends and the world around you.\n                </Heading>\n              </div>\n\n              <p>See photos and updates from your friends.</p>\n              <p>Follow your interests.</p>\n              <p>Hear what people are talking about.</p>\n            </Welcome>\n\n            <Form>\n              <Spacing bottom=\"md\">\n                <H1>Create Account</H1>\n              </Spacing>\n\n              <form onSubmit={e => handleSubmit(e, signup)}>\n                <InputText\n                  type=\"text\"\n                  name=\"fullName\"\n                  values={fullName}\n                  onChange={handleChange}\n                  placeholder=\"Full name\"\n                  borderColor=\"white\"\n                />\n                <Spacing top=\"xs\" bottom=\"xs\">\n                  <InputText\n                    type=\"text\"\n                    name=\"email\"\n                    values={email}\n                    onChange={handleChange}\n                    placeholder=\"Email\"\n                    borderColor=\"white\"\n                  />\n                </Spacing>\n                <InputText\n                  type=\"text\"\n                  name=\"username\"\n                  values={username}\n                  onChange={handleChange}\n                  placeholder=\"Username\"\n                  borderColor=\"white\"\n                />\n                <Spacing top=\"xs\" bottom=\"xs\">\n                  <InputText\n                    type=\"password\"\n                    name=\"password\"\n                    values={password}\n                    onChange={handleChange}\n                    placeholder=\"Password\"\n                    borderColor=\"white\"\n                  />\n                </Spacing>\n\n                {renderErrors(apiError)}\n\n                <Spacing top=\"sm\" />\n                <Button size=\"large\" disabled={loading}>\n                  Sign up\n                </Button>\n              </form>\n            </Form>\n          </Root>\n        );\n      }}\n    </Mutation>\n  );\n};\n\nSignUp.propTypes = {\n  history: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired,\n};\n\nexport default withRouter(SignUp);\n"]},"metadata":{},"sourceType":"module"}